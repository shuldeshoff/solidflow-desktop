# Руководство по разработке

## Начало работы

### Требования
* Python 3.10 или выше
* Git
* Виртуальное окружение (venv, conda, или poetry)

### Установка зависимостей

```bash
# Создание виртуального окружения
python -m venv venv

# Активация (Linux/macOS)
source venv/bin/activate

# Активация (Windows)
venv\Scripts\activate

# Установка зависимостей
pip install -r requirements.txt
```

### Структура проекта

```
solidflow-desktop/
├── src/                 # Исходный код
│   ├── core/           # Ядро системы
│   ├── gui/            # GUI компоненты
│   ├── geometry/       # Работа с геометрией
│   ├── analysis/       # Анализ моделей
│   ├── ml/             # ML компоненты
│   └── plugins/        # Плагины
├── tests/              # Тесты
├── docs/               # Документация
├── resources/          # Ресурсы (иконки, модели)
└── scripts/            # Вспомогательные скрипты
```

## Архитектура разработки

### Модульная структура
Каждый модуль должен быть независимым настолько, насколько это возможно, с четко определенными интерфейсами.

### Управление состоянием
Использовать централизованное хранилище состояния для управления данными проекта.

### Plugin API
Разработка плагинов должна следовать единому API для интеграции в систему.

## Тестирование

### Unit-тесты
* Каждый модуль должен иметь unit-тесты
* Использовать pytest для написания тестов
* Покрытие кода должно быть не менее 70%

### Интеграционные тесты
* Тесты для геометрических алгоритмов
* Тесты для конвертации форматов
* Тесты для критических путей выполнения

### Запуск тестов
```bash
# Все тесты
pytest

# С покрытием
pytest --cov=src --cov-report=html

# Конкретный модуль
pytest tests/test_geometry.py
```

## Стиль кода

### Форматирование
* Использовать black для форматирования кода
* Максимальная длина строки: 100 символов

### Линтинг
* flake8 для проверки стиля
* mypy для проверки типов (опционально)

### Документация кода
* Docstrings для всех публичных функций и классов
* Использовать Google или NumPy стиль docstrings

## Работа с Git

### Ветвление
* `main` - основная ветка (стабильная версия)
* `develop` - ветка разработки
* `feature/*` - новые функции
* `fix/*` - исправления багов

### Коммиты
* Использовать понятные сообщения коммитов
* Префиксы: `feat:`, `fix:`, `docs:`, `refactor:`, `test:`

### Pull Requests
* Описательные названия PR
* Описание изменений
* Ссылки на связанные issues

## CI/CD

### Автоматические проверки
* Линтинг кода
* Запуск тестов
* Проверка типов (если используется mypy)

### Сборка
* Автоматическая сборка для всех платформ при создании release
* Создание установочных пакетов
* Проверка работоспособности собранного приложения

## Работа с геометрией

### Производительность
* Оптимизация операций над большими моделями
* Использование кэширования где возможно
* Асинхронная обработка тяжелых операций

### Обработка ошибок
* Валидация входных данных
* Понятные сообщения об ошибках
* Логирование для отладки

### Тестирование геометрических алгоритмов
* Использование тестовых моделей
* Проверка на известных случаях (edge cases)
* Визуальная проверка результатов

## Отладка

### Логирование
* Использовать стандартный модуль logging
* Различные уровни логирования (DEBUG, INFO, WARNING, ERROR)
* Логирование критических операций

### Инструменты
* Отладчик (pdb, ipdb)
* Профилирование для оптимизации производительности
* Визуализация данных для проверки результатов

## Документация

### Код
* Docstrings для всех публичных API
* Комментарии для сложной логики
* Type hints для лучшей читаемости

### Пользовательская документация
* Руководство пользователя
* Туториалы
* FAQ

### API документация
* Автогенерация из docstrings (Sphinx)
* Примеры использования
* Описание интерфейсов

## Release процесс

### Версионирование
* Семантическое версионирование (SemVer): MAJOR.MINOR.PATCH
* Теги в Git для версий

### Чеклист перед release
* Все тесты проходят
* Документация обновлена
* Версия обновлена во всех нужных местах
* Changelog обновлен
* Сборка работает на всех платформах

### Создание release
1. Создать ветку release из develop
2. Обновить версию
3. Обновить changelog
4. Создать PR в main
5. После мерджа создать тег
6. CI/CD соберет и опубликует бинарники

## Полезные команды

```bash
# Форматирование кода
black src/ tests/

# Линтинг
flake8 src/ tests/

# Типы (если используется)
mypy src/

# Запуск приложения в режиме разработки
python -m src.main

# Сборка
python setup.py build

# Создание дистрибутива
python setup.py sdist bdist_wheel
```

