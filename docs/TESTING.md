# Тестирование SolidFlow Desktop

## Быстрый тест

### 1. Запуск приложения

```bash
# Активируйте виртуальное окружение (если используете)
source venv/bin/activate  # Linux/macOS
# или
venv\Scripts\activate  # Windows

# Установите зависимости если еще не установлены
pip install -r requirements.txt

# Запустите приложение
python -m solidflow
```

### 2. Тест полного цикла (ручной)

После запуска приложения:

1. **Файл → Открыть** (Ctrl+O)
   - Выберите любой STL файл
   - Проверьте, что модель отображается
   - Проверьте панель информации справа

2. **Инструменты → Анализировать модель**
   - Проверьте результаты в диалоге
   - Проверьте статус в панели информации

3. **Инструменты → Ремонт модели** (если есть проблемы)
   - Подтвердите ремонт
   - Проверьте результат

4. **Вид → Каркас / Заливка**
   - Переключите режимы отображения
   - Убедитесь, что оба режима работают

5. **Файл → Сохранить как** (Ctrl+Shift+S)
   - Сохраните в новый файл
   - Проверьте, что файл создан

6. **Файл → Открыть**
   - Откройте только что сохраненный файл
   - Убедитесь, что он загружается корректно

## Автоматизированный тест

```bash
# Запустите скрипт тестирования
python scripts/test_full_cycle.py
```

Этот скрипт проверяет:
- Импорт STL
- Расчет статистики
- Валидацию модели
- Ремонт (если нужен)
- Экспорт STL
- Повторный импорт для проверки

## Unit-тесты

```bash
# Запустить все тесты
pytest tests/

# С покрытием кода
pytest tests/ --cov=src/solidflow --cov-report=html

# Только unit-тесты
pytest tests/unit/

# Конкретный тест
pytest tests/unit/test_validator.py
```

## Тестовые модели

Создайте тестовые модели:

```bash
python scripts/create_test_models.py
```

Это создаст в `resources/models/`:
- `test_cube.stl` - простой куб
- `test_sphere.stl` - сфера
- `test_cylinder.stl` - цилиндр

## Проверка на разных платформах

### Windows
```cmd
python -m solidflow
```

### macOS
```bash
python -m solidflow
```

### Linux
```bash
python -m solidflow
```

## Проверка сборки

```bash
# Установить pyinstaller
pip install pyinstaller

# Собрать executable
pyinstaller --name SolidFlow --windowed --onefile src/solidflow/__main__.py

# Проверить сборку
./dist/SolidFlow  # Linux/macOS
dist\SolidFlow.exe  # Windows
```

## Типичные проблемы

### Не запускается приложение

1. Проверьте Python версию:
```bash
python --version  # должна быть 3.10+
```

2. Проверьте зависимости:
```bash
pip list | grep -i "pyside6\|pyvista\|trimesh"
```

3. Переустановите зависимости:
```bash
pip install --upgrade -r requirements.txt
```

### Не отображается 3D

1. Проверьте OpenGL:
```bash
python -c "import pyvista; pyvista.set_plot_theme('document'); plotter = pyvista.Plotter(); print('OK')"
```

2. Обновите драйверы видеокарты

### Ошибки импорта STL

1. Проверьте файл в другом приложении
2. Убедитесь, что это корректный STL (бинарный или текстовый)
3. Проверьте размер файла (не слишком большой?)

## Тестирование производительности

### Маленькие модели (< 10K треугольников)
Должно работать мгновенно

### Средние модели (10K - 100K треугольников)
Должно работать плавно

### Большие модели (100K - 1M треугольников)
Может быть замедление, но приемлемо

### Очень большие модели (> 1M треугольников)
Не гарантируется для MVP

## Checklist перед релизом

- [ ] Приложение запускается на Windows
- [ ] Приложение запускается на macOS
- [ ] Приложение запускается на Linux
- [ ] Импорт STL работает
- [ ] Экспорт STL работает
- [ ] Анализ работает
- [ ] Ремонт работает
- [ ] Режимы отображения работают
- [ ] Все меню функциональны
- [ ] Tooltips отображаются
- [ ] Ошибки обрабатываются корректно
- [ ] Unit-тесты проходят
- [ ] Можно собрать executable
- [ ] Executable запускается
- [ ] Документация актуальна

## Отчет о багах

Если нашли баг, создайте Issue на GitHub с информацией:

1. **Описание проблемы**
2. **Шаги для воспроизведения**
3. **Ожидаемый результат**
4. **Фактический результат**
5. **Версия приложения**
6. **ОС и версия**
7. **Лог ошибки** (если есть)

